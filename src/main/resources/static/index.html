<!DOCTYPE html>
<html lang="en">
<style>
    div {
        margin: 10px auto;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>파일 확장자 차단</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">

        $(function () {

            getPinExtension();
            getCustomExtension();



            // 고정 확장자 모두 조회하기
            function getPinExtension() {
                $.ajax({
                    type: "GET",
                    url: "/api/extensions/pin",
                    contentType: 'application/json; charset=UTF-8',
                    dataType: "json",
                    success: function (json) {
                        var list = "";
                        for (i = 0; i < json.length; i++) {
                            list += "<span style=\"margin-left: 2px; margin-right: 2px\">";
                            list += "<input type=\"checkbox\" id=\"" + json[i].name + "\"> <label>" + json[i].name +"</label>";
                            list += "</span>";
                        }


                        $("td#pin").empty();
                        $("td#pin").append(list);

                        for(i = 0; i < json.length; i++) {
                            if(json[i].checked) {
                                $('input:checkbox[id=\"' + json[i].name+ '\"]').prop('checked', true);
                            }
                        }


                        console.log(json);
                    },
                    error: function (e, text) {
                        console.log(e, text);
                    }
                });
            }


            // 커스텀 확장자 전체 조회하기
            function getCustomExtension() {
                $.ajax({
                    type: "GET",
                    url: "/api/extensions/custom",
                    contentType: 'application/json; charset=UTF-8',
                    dataType: "json",
                    success: function (data) {
                        console.log(data);
                    },
                    error: function (e, text) {
                        console.log(e, text);
                    }
                });
            }

        });
    </script>
</head>
<body>


    <div style="width: 500px">
        <table>
            <hr>
            <h3>◎파일 확장자 차단</h3>
            <hr style="border: black solid 2px">
            <h4>파일확장자에 따라 특정 형식의 파일을 첨부하거나 전송하지 못하도록 제한</h4>

            <tbody>
                <tr>
                    <td><label>고정 확장자</label></td>
                    <td id="pin"></td>
                </tr>
                <tr>
                    <td><label>커스텀 확장자</label></td>
                    <td ><span><input type="text"> <button> 추가 </button></span></td>
                </tr>
                <tr>
                    <td><label></label></td>
                    <td><div style="border: black solid 1px; height: 100px"></div></td>
                </tr>
            </tbody>
        </table>
    </div>


<!--    <p>-->
<!--        <label for="author">커스텀 확장자</label>-->
<!--        <input type="text" id="author" name="author" required>-->
<!--        <button>추가 </button>-->
<!--    </p>-->
<!--    <p>-->
<!--        <textarea id="content" name="content" required></textarea>-->
<!--    </p>-->


<!--<table>-->
<!--    <h1>◎파일 확장자 차단</h1>-->
<!--    <span>파일확장자에 따라 특정 형식의 파일을 첨부하거나 전송하지 못하도록 제한</span>-->
<!--    <tbody style="width: 1000px; height: 1000px; margin: auto auto;">-->
<!--    <tr style="height: 20px;">-->
<!--        <th style="width: 100px;">고정 확장자</th>-->
<!--        <td>-->
<!--            <input type="checkbox"> &lt;!&ndash; 동적으로 데이터 가져 올 예정&ndash;&gt;-->
<!--        </td>-->
<!--    </tr>-->
<!--    <tr style="height: 20px;">-->
<!--        <th style="width: 100px;">커스텀 확장자</th>-->
<!--        <td>-->
<!--            &lt;!&ndash; 동적으로 데이터 가져 올 예정&ndash;&gt;-->
<!--            <input type="text"> <input type="button">-->


<!--        </td>-->
<!--    </tr>-->
<!--    <tr style="height: 20px;">-->
<!--        <th style="width: 100px;"></th>-->
<!--        <td>-->
<!--            <div style="border: 1px solid black; border-radius: 15px; min-width: 300px; min-height: 300px;">-->
<!--                <div style="margin: 3px 3px 0px 3px"><span id="custom-count"> customCount </span>/200</div>-->
<!--                <div id="custom-list-div" style="margin-top: 5px;">-->

<!--                </div>-->
<!--            </div>-->
<!--        </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--</table>-->


</body>
</html>